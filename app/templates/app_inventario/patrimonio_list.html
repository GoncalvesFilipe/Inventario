<div class="mb-3">

  {# TÍTULO DA SEÇÃO #}
  <h5 class="fw-bold text-success">Lista de Patrimônios</h5>


  {# IDENTIFICAÇÃO DO PERFIL DO USUÁRIO LOGADO #}
  {# Administrador (Superuser ou Presidente) ou Inventariante #}
  {% if is_admin %}
  <p class="text-secondary">
    Responsável (acesso total):
    <strong>
      {{ request.user.get_full_name|default:request.user.username }}
    </strong>
  </p>
  {% else %}
  <p class="text-secondary">
    Inventariante responsável:
    <strong>
      {{ request.user.inventariante|default:"Inventariante não vinculado" }}
    </strong>
  </p>
  {% endif %}

  {# CAMPO DE BUSCA COM HTMX #}
  {# Pesquisa dinâmica sem recarregar a página #}
  <div class="input-group mb-3 mt-3">

    <input type="text" class="form-control" name="q"
      placeholder="Buscar Patrimônio (Nº, Descrição, Setor, Dependência...)" value="{{ search_query }}"
      hx-get="{% url 'patrimonio_list' %}" hx-trigger="keyup changed delay:750ms, search" hx-target="#conteudo-admin"
      hx-swap="innerHTML" hx-indicator="#loading-indicator">

    <button class="btn btn-outline-secondary" type="button">
      <span id="loading-indicator" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"
        style="display: none;"></span>
      <i class="bi bi-search"></i>
    </button>

  </div>

  {# BOTÕES DE AÇÃO #}
  <div class="d-flex gap-2 mt-2">

    {# Botão padrão de cadastro manual de patrimônio #}
    <button class="btn btn-success btn-sm" hx-get="{% url 'patrimonio_add' %}" hx-target="#modal-patrimonio-body"
      hx-swap="innerHTML" data-bs-toggle="modal" data-bs-target="#modalPatrimonio">
      Adicionar Patrimônio
    </button>

    {# Botão de registro/importação via planilha #}
    {# Acesso restrito a Presidente ou Superuser #}
    {% if is_admin %}
    <button class="btn btn-outline-primary btn-sm" hx-get="{% url 'upload_planilha' %}"
      hx-target="#modal-patrimonio-body" hx-swap="innerHTML" data-bs-toggle="modal" data-bs-target="#modalPatrimonio">
      Registrar em Planilha
    </button>
    {% endif %}

  </div>

</div>

{# LISTAGEM DE PATRIMÔNIOS + PAGINAÇÃO #}
{# Conteúdo parcial para reutilização e HTMX #}
<div id="conteudo-patrimonios">
  {% include "app_inventario/partials/tabela_e_paginacao.html" %}
</div>